<div class="promotion_action promotion-block <%= promotion_action.model_name.element %>" id="<%= dom_id promotion_action %>">
  <h6 class="promotion-title"><%= promotion_action.class.human_attribute_name(:description) %></h6>
  <% if promotion_action.persisted? && can?(:destroy, promotion_action) %>
    <%= link_to_with_icon 'trash', '', solidus_friendly_promotions.admin_promotion_promotion_action_path(@promotion, promotion_action), method: :delete, class: 'delete' %>
  <% end %>
  <%= form_tag solidus_friendly_promotions.admin_promotion_promotion_action_path(@promotion, promotion_action), method: :patch do %>

    <% param_prefix = "promotion_action" %>
    <%= hidden_field_tag "#{param_prefix}[type]", promotion_action.type %>

    <%= render partial: "spree/shared/error_messages", locals: { target: promotion_action } %>
    <%= render partial: promotion_action.to_partial_path,
              locals: { promotion_action: promotion_action, param_prefix: param_prefix } %>
    <div class="row">
      <div class="col-12">
        <% button_label = promotion_action.persisted? ? :update : :add %>
        <%= button_tag t(button_label, scope: 'solidus_friendly_promotions.crud'), class: "btn btn-secondary float-right"%>
      </div>
    </div>
  <% end %>
</div>
