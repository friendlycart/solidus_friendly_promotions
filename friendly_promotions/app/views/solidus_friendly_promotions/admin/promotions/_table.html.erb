<table class="index">
  <thead>
    <tr>
      <th><%= SolidusFriendlyPromotions::Promotion.human_attribute_name(:name) %></th>
      <th><%= SolidusFriendlyPromotions::Promotion.human_attribute_name(:code) %></th>
      <th><%= SolidusFriendlyPromotions::Promotion.human_attribute_name(:status) %></th>
      <th><%= SolidusFriendlyPromotions::Promotion.human_attribute_name(:usage_limit) %></th>
      <th><%= SolidusFriendlyPromotions::Promotion.human_attribute_name(:uses) %></th>
      <th><%= SolidusFriendlyPromotions::Promotion.human_attribute_name(:starts_at) %></th>
      <th><%= SolidusFriendlyPromotions::Promotion.human_attribute_name(:expires_at) %></th>
      <th class="actions"></th>
    </tr>
  </thead>
  <tbody>
    <% promotions.each do |promotion| %>
      <tr id="<%= spree_dom_id promotion %>">
        <td><%= promotion.name %></td>
        <td>
          <%= (promotion.codes.size == 1) ? promotion.codes.pluck(:value).first : t('solidus_friendly_promotions.number_of_codes', count: promotion.codes.size) %>
        </td>
        <td>
          <span class="pill pill-<%= promotion.active? ? 'active' : 'inactive' %>">
            <%= t(admin_promotion_status(promotion), scope: 'solidus_friendly_promotions.admin.promotion_status') %>
          </span>
        </td>
        <td>
          <%= promotion.usage_limit.nil? ? "âˆž" : promotion.usage_limit %>
        </td>
        <td>
          <%= promotion.usage_count %>
        </td>
        <td>
          <%= promotion.starts_at.to_fs(:long) if promotion.starts_at %>
        </td>
        <td>
          <%= promotion.expires_at.to_fs(:long) if promotion.expires_at %>
        </td>
        <td class="actions">
          <% if can?(:edit, promotion) %>
            <%= link_to_edit promotion, no_text: true %>
          <% end %>
          <% if can?(:destroy, promotion) %>
            <%= link_to_delete promotion, no_text: true %>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
