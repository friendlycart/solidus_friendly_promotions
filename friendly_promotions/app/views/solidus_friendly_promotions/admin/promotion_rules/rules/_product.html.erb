<%= fields_for param_prefix, promotion_rule do |form| %>
  <div class="field products_rule_products">
    <%= form.label :product_ids_string, t('solidus_friendly_promotions.product_rule.choose_products') %>
    <%= form.hidden_field :product_ids_string, value: promotion_rule.product_ids.join(","), class: "product_picker fullwidth" %>
  </div>

  <div class="field">
    <%
      match_policy_options = options_for_select(
        SolidusFriendlyPromotions::Rules::Product::MATCH_POLICIES.map { |s| [t("solidus_friendly_promotions.product_rule.match_#{s}"),s] },
        promotion_rule.preferred_match_policy
      )
    %>
    <% select = form.select :preferred_match_policy, match_policy_options %>
    <%= form.label :preferred_match_policy, t('solidus_friendly_promotions.product_rule.label', select: select).html_safe %>
    </label>
  </div>
<% end %>
